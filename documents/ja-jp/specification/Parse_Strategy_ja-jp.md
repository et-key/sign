# Sign言語パーサー設計仕様

## 基本原理

**Sign言語記法変換器**：多様な記法を統一された記法に正規化する。

## 構文と型の対応関係について

* 「ブロック構文開始前」「ブロック階層の深化前」の行の末尾は必ず以下の記号で終わる
  * `?`
  * `:`
  * 行頭 + `[`、
  * 行頭 + `{`、
  * 行頭 + `(`、
  
  で終わる

* 多項式では、結合順序又は演算子の優先順位で二項式に置換え可能
  ```
  test : 1 + 3! * 2
  ↓
  [test : [1 + [3! * 2]]]
  ```
  ```
  test : (1 + 3!) * 2
  ↓
  [test : [[1 + 3!] * 2]]
  ```
  ```
  test : a & b | ![c & !d | e] & aa
  [test : [[a & b] | [![[c & !d] | e] & aa]]]
  ```
  ```
  test : a & b & ![c | !d & e] | aa
  [test : [[[a & b] & ![c | [!d & e]]] | aa]]
  ```

* 左結合、右結合の区分とリスト化による処理の明確化

  ```
  [+ 2] [* 4] [+ 3] [^ 2]
  ↓
  [[[[+ 2] [* 4]] [+ 3]] [^ 2]]
  ```
  ```
  [+ 2] [* 4] [+ 3] [^ 2]
  ↓
  [[+ 2] , [[* 4] , [[+ 3] , [^ 2]]]]
  ```
  ```
  [+] 1 2 3
  ↓
  [[+] [[1 2] 3]]
  ```
  ```
  [+ 2,] [* 4,] [+] 1 2 3
  ↓
  [[[[+ 2,] [* 4,]] [+]] [[1 2] 3]]
  ```

## 処理手順

1. 多項式を判別
2. 優先順位に従ってカッコを足して行き、多項式を二項演算の組に直す
3. 二項演算をラムダ記法へ記法変換
4. 前置演算、後置演算がついた部分を丸ごとカッコを足す
5. 単項演算をラムダ記法へ記法変換

