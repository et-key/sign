// ==========================================
// Sign言語 トランスパイラ テストケース
// ==========================================

// ==========================================
// グローバル基本変数定義
// ==========================================

x : 42
y : 10
a : 1
b : 0
n : 5

// ==========================================
// 基本算術演算
// ==========================================

sum : x + y
diff : x - y
product : x * y
quotient : x / y

// ==========================================
// 演算子の優先順位
// ==========================================

arith_complex1 : 10 + 20 * 3
arith_complex2 : 100 - 50 / 2
arith_complex3 : 2 * 3 + 4 * 5

// ==========================================
// 累乗演算
// ==========================================

power1 : 2 ^ 3
power2 : x ^ 2
power3 : 2 ^ 3 * 5

// ==========================================
// 剰余演算
// ==========================================

mod1 : 10 % 3

// ==========================================
// 比較演算（値返却型）
// ==========================================

compare1 : x < 50
compare2 : y > 5
compare3 : x = 42
compare4 : 10 <= 20
compare5 : 50 >= 30
compare6 : x != 0

// ==========================================
// 論理演算
// ==========================================

logic1 : a & b
logic2 : a | b
logic3 : a ; b
logic4 : x > 0 & x < 100
logic5 : y = 0 | y = 10

// ==========================================
// match_case構文（単一引数）
// ==========================================

xx : 42
yy : -5

classify : xx ?
	xx < 0 : `negative`
	xx = 0 : `zero`
	xx > 0 : `positive`

result1 : classify xx
result2 : classify yy

// ==========================================
// match_case構文（カリー化・複数引数）
// ==========================================

mySc : xx yy ?
	xx < 0 : xx * -1
	xx = 0 : yy
	xx > 0 : xx

result3 : mySc xx yy

// ==========================================
// match_case構文（デフォルトケース）
// ==========================================

score : 85

grade : score ?
	score >= 90 : `A`
	score >= 80 : `B`
	score >= 70 : `C`
	score >= 60 : `D`
	`F`

result4 : grade score

// ==========================================
// ネストしたmatch_case構文（2段階）
// ==========================================

xxx : 5
yyy : 3

classify2D : xxx yyy ?
	xxx > 0 :
		yyy ?
			yyy > 0 : `first quadrant`
			yyy < 0 : `fourth quadrant`
			`y-axis positive`
	xxx < 0 :
		yyy ?
			yyy > 0 : `second quadrant`
			yyy < 0 : `third quadrant`
			`y-axis negative`
	yyy ?
		yyy > 0 : `x-axis positive`
		yyy < 0 : `x-axis negative`
		`origin`

result_2_1 : classify2D 5 3
result_2_2 : classify2D -5 3
result_2_5 : classify2D 0 5
result_2_6 : classify2D 0 0

// ==========================================
// ネストしたmatch_case構文（2段階・条件内にネスト）
// ==========================================

gradeWithBonus : score bonus ?
	bonus > 0 :
		score ?
			score >= 85 : `A`
			score >= 75 : `B`
			`C`
	score ?
		score >= 90 : `A`
		score >= 80 : `B`
		`C`

result_2_7 : gradeWithBonus 85 5
result_2_8 : gradeWithBonus 85 0

// ==========================================
// ラムダ式（単一引数）
// ==========================================

increment : n ? n + 1
square : n ? n ^ 2

lambda_result1 : increment 5

// ==========================================
// ラムダ式（カリー化・複数引数）
// ==========================================

add : x y ? x + y
multiply : x y ? x * y

lambda_result4 : add 10 20
lambda_result5 : multiply 3 7

// ==========================================
// ラムダ式（複雑な式）
// ==========================================

quadratic : a b c x ? a * x ^ 2 + b * x + c
distance : x1 y1 x2 y2 ? (x2 - x1) ^ 2 + (y2 - y1) ^ 2

lambda_result7 : quadratic 1 2 3 5
lambda_result8 : distance 0 0 3 4

// ==========================================
// ラムダ式（3引数以上）
// ==========================================

sum3 : x y z ? x + y + z

lambda_result9 : sum3 1 2 3

// ==========================================
// ラムダ式と既存の値の組み合わせ
// ==========================================

addX : n ? n + x

lambda_result11 : addX 10

// ==========================================
// リスト操作テストケース
// ==========================================

// ------------------------------------------
// 1. リスト構築（カンマ演算子）
// ------------------------------------------

list1 : 1, 2, 3
list2 : 10, 20, 30, 40
list3 : x, y, sum

emptyList : []
singleList : [42]

// ------------------------------------------
// 2. 範囲リスト（チルダ演算子）
// ------------------------------------------

range1 : [1 ~ 5]
range3 : [10 ~ 1]
range4 : [-5 ~ 5]

// ------------------------------------------
// 3. リスト結合（余積・スペース演算子）
// ------------------------------------------

concat1 : list1 list2
concat2 : [1, 2] [3, 4]

// ------------------------------------------
// 4. MAP演算（部分適用のリスト適用）
// ------------------------------------------

doubled : [* 2,] list1
squared : [^ 2,] list1

// ------------------------------------------
// 5. FOLD演算（リダクション）
// ------------------------------------------

sum_list : [+] list1
product_list : [*] list1

// ------------------------------------------
// 6. リスト展開（スプレッド構文）
// ------------------------------------------

spread1 : sum3 list1~

// ------------------------------------------
// 7. 組み合わせ操作
// ------------------------------------------

map_then_fold : [+] [* 2,] list1

// ------------------------------------------
// 8. 高階関数との組み合わせ
// ------------------------------------------

custom_map1 : [n ? n * 3,] list1

// ------------------------------------------
// 9. 複雑な式の部分適用
// ------------------------------------------

complex_map1 : [* 2 + 1,] [1, 2, 3]

// ------------------------------------------
// 10. ネストしたリスト
// ------------------------------------------

nested_2d : [[1, 2], [3, 4]]
nested_flat : [[1, 2] [3, 4]]

// ------------------------------------------
// 11. リストのアクセス
// ------------------------------------------

first : list1 ' 0
slice1 : list2 ' [0 ~ 2]

// ------------------------------------------
// 12. 実用的な例
// ------------------------------------------

fib_sum : [+] [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
squares : [^ 2,] [1 ~ 10]

// ==========================================
// 単項演算子テストケース
// ==========================================

// ==========================================
// 論理NOT（前置演算子）
// ==========================================

not1 : !a
not3 : !_
not4 : !(x > 0)

// ==========================================
// 符号反転（前置演算子）
// ==========================================

neg1 : -x
neg4 : -(x + y)

// ==========================================
// 階乗（後置演算子）
// ==========================================

fact1 : 5!
fact3 : 0!
fact4 : n!

// ==========================================
// 絶対値（囲み演算子）
// ==========================================

abs1 : |x|
abs4 : |x - y|

// ==========================================
// 単項演算子の組み合わせ
// ==========================================

unary_combo1 : !(x < 50)
unary_combo3 : (-2) ^ 3
unary_combo4 : -(2 ^ 3)
unary_combo5 : |x| + |y|

// ==========================================
// 複雑な組み合わせ
// ==========================================

unary_complex1 : !a | !b
unary_complex2 : !(a & b)
unary_complex4 : -|x|

// ==========================================
// 関数と単項演算子
// ==========================================

negate : x ? -x
absolute : x ? |x|
factorial : n ? n!
logicalNot : x ? !x

apply1 : negate 10
apply2 : absolute -20

// ==========================================
// 辞書型テスト
// ==========================================

// ------------------------------------------
// 基本的な辞書型
// ------------------------------------------
config:
	host: `localhost`
	port: 3000
	debug: !_

// ------------------------------------------
// ネストした辞書型
// ------------------------------------------
person:
	profile:
		name: `Alice`
		age: 30
	contact:
		email: `alice@example.com`

// ------------------------------------------
// get演算子によるアクセス
// ------------------------------------------
host_value: config ' host
person_name: person ' profile ' name
person_email: person ' contact ' email

// ------------------------------------------
// 単一プロパティ
// ------------------------------------------
single:
	value: 42

// ------------------------------------------
// 混在（リストと辞書）
// ------------------------------------------
mixed:
	items: 1, 2, 3
	count: 3

// ------------------------------------------
// 変数を含む辞書
// ------------------------------------------
data:
	x_value: x
	y_value: y
	sum_value: sum
