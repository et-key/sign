// ==========================================
// 基本的な定義
// ==========================================

x : 42
y : 10

// ==========================================
// 基本算術演算
// ==========================================

sum : x + y
diff : x - y
product : x * y
quotient : x / y

calc1 : 10 + 20
calc2 : 5 * 3
calc3 : 100 - 25
calc4 : 50 / 2

// ==========================================
// 演算子の優先順位
// ==========================================

complex1 : 10 + 20 * 3
complex2 : 100 - 50 / 2
complex3 : 2 * 3 + 4 * 5

// ==========================================
// 累乗演算
// ==========================================

power1 : 2 ^ 3
power2 : x ^ 2
power3 : 2 ^ 3 * 5

// ==========================================
// 剰余演算
// ==========================================

mod1 : 10 % 3
mod2 : 100 % 7

// ==========================================
// 比較演算（値返却型）
// ==========================================

compare1 : x < 50
compare2 : y > 5
compare3 : x = 42
compare4 : 10 <= 20
compare5 : 50 >= 30
compare6 : x != 0

// ==========================================
// 論理演算
// ==========================================

a : 1
b : 0

logic1 : a & b
logic2 : a | b
logic3 : a ; b
logic4 : x > 0 & x < 100
logic5 : y = 0 | y = 10

// ==========================================
// match_case構文（単一引数）
// ==========================================

xx : 42
yy : -5

classify : xx ?
	xx < 0 : `negative`
	xx = 0 : `zero`
	xx > 0 : `positive`

result1 : classify xx
result2 : classify yy

// ==========================================
// match_case構文（カリー化・複数引数）
// ==========================================

mySc : xx yy ?
	xx < 0 : xx * -1
	xx = 0 : yy
	xx > 0 : xx

result3 : mySc xx yy

// ==========================================
// match_case構文（デフォルトケース）
// ==========================================

score : 85

grade : score ?
	score >= 90 : `A`
	score >= 80 : `B`
	score >= 70 : `C`
	score >= 60 : `D`
	`F`

result4 : grade score
result5 : grade 50

// ==========================================
// ネストしたmatch_case構文（2段階）
// ==========================================

xxx : 5
yyy : 3

classify2D : xxx yyy ?
	xxx > 0 :
		yyy ?
			yyy > 0 : `first quadrant`
			yyy < 0 : `fourth quadrant`
			`y-axis positive`
	xxx < 0 :
		yyy ?
			yyy > 0 : `second quadrant`
			yyy < 0 : `third quadrant`
			`y-axis negative`
	yyy ?
		yyy > 0 : `x-axis positive`
		yyy < 0 : `x-axis negative`
		`origin`

result_2_1 : classify2D 5 3
result_2_2 : classify2D -5 3
result_2_3 : classify2D 5 -3
result_2_4 : classify2D -5 -3
result_2_5 : classify2D 0 5
result_2_6 : classify2D 0 0

// ==========================================
// ネストしたmatch_case構文（2段階・条件内にネスト）
// ==========================================

gradeWithBonus : score bonus ?
	bonus > 0 :
		score ?
			score >= 85 : `A`
			score >= 75 : `B`
			`C`
	score ?
		score >= 90 : `A`
		score >= 80 : `B`
		`C`

result_2_7 : gradeWithBonus 85 5
result_2_8 : gradeWithBonus 85 0

// ==========================================
// ラムダ式（単一引数）
// ==========================================

increment : n ? n + 1
double : n ? n * 2
square : n ? n ^ 2

lambda_result1 : increment 5
lambda_result2 : double 3
lambda_result3 : square 4

// ==========================================
// ラムダ式（カリー化・複数引数）
// ==========================================

add : x y ? x + y
multiply : x y ? x * y
power : base exp ? base ^ exp

lambda_result4 : add 10 20
lambda_result5 : multiply 3 7
lambda_result6 : power 2 8

// ==========================================
// ラムダ式（複雑な式）
// ==========================================

quadratic : a b c x ? a * x ^ 2 + b * x + c
distance : x1 y1 x2 y2 ? (x2 - x1) ^ 2 + (y2 - y1) ^ 2

lambda_result7 : quadratic 1 2 3 5
lambda_result8 : distance 0 0 3 4

// ==========================================
// ラムダ式（3引数以上）
// ==========================================

sum3 : x y z ? x + y + z
product3 : x y z ? x * y * z

lambda_result9 : sum3 1 2 3
lambda_result10 : product3 2 3 4

// ==========================================
// ラムダ式と既存の値の組み合わせ
// ==========================================

addX : n ? n + x
multiplyY : n ? n * y

lambda_result11 : addX 10
lambda_result12 : multiplyY 5

// ==========================================
// リスト操作テストケース
// ==========================================

// ------------------------------------------
// 1. リスト構築（カンマ演算子）
// ------------------------------------------

// 単純なリスト（カンマで構築）
list1 : 1, 2, 3
list2 : 10, 20, 30, 40
list3 : x, y, sum

// 空リスト
emptyList : []

// 単一要素のリスト
singleList : [42]

// ------------------------------------------
// 2. 範囲リスト（チルダ演算子）
// ------------------------------------------

range1 : [1 ~ 5]
range2 : [0 ~ 10]
range3 : [10 ~ 1]
range4 : [-5 ~ 5]

// ------------------------------------------
// 3. リスト結合（余積・スペース演算子）
// ------------------------------------------

// 2つのリストを結合
concat1 : list1 list2
concat2 : [1, 2] [3, 4]
concat3 : list1 [100, 200]

// 複数結合
concat4 : [1] [2] [3]

// ------------------------------------------
// 4. MAP演算（部分適用のリスト適用）
// 最後のカンマ必須！
// ------------------------------------------

// 各要素に2を掛ける
doubled : [* 2,] list1

// 各要素に10を足す
added : [+ 10,] list1

// 各要素を2乗
squared : [^ 2,] list1

// 各要素を2で割る
halved : [/ 2,] list2

// ------------------------------------------
// 5. FOLD演算（リダクション）
// カンマなし！
// ------------------------------------------

// 合計
sum_list : [+] list1
sum_range : [+] [1 ~ 10]

// 積
product_list : [*] list1
product_range : [*] [1 ~ 5]

// ------------------------------------------
// 6. リスト展開（スプレッド構文）
// ------------------------------------------

// 展開して関数に渡す
spread1 : sum3 list1~
spread2 : add list1~

// 展開してリストに結合
spread3 : 0, list1~, 100

// ------------------------------------------
// 7. 組み合わせ操作
// ------------------------------------------

// MAP → FOLD
map_then_fold : [+] [* 2,] list1

// 範囲 → MAP → FOLD
range_map_fold : [+] [^ 2,] [1 ~ 5]

// リスト結合 → MAP
concat_then_map : [+ 1,] list1 list2

// ------------------------------------------
// 8. 高階関数との組み合わせ
// ------------------------------------------

// ラムダ式を直接MAP（各要素を3倍）
custom_map1 : [n ? n * 3,] list1

// ラムダ式で2乗
custom_map2 : [n ? n ^ 2,] list1

// ------------------------------------------
// 9. 複雑な式の部分適用
// ------------------------------------------

// 2倍して1を足す
complex_map1 : [* 2 + 1,] [1, 2, 3]

// 3倍して10を引く
complex_map2 : [* 3 - 10,] [5, 6, 7]

// ------------------------------------------
// 10. ネストしたリスト
// ------------------------------------------

// 二次元配列（構造保持）
nested_2d : [[1, 2], [3, 4]]

// リスト結合（フラット化）
nested_flat : [[1, 2] [3, 4]]

// 三次元配列
nested_3d : [[[1, 2], [3, 4]], [[5, 6], [7, 8]]]

// ------------------------------------------
// 11. リストのアクセス
// ------------------------------------------

// 最初の要素
first : list1 ' 0

// 範囲でスライス
slice1 : list2 ' [0 ~ 2]

// ------------------------------------------
// 12. 実用的な例
// ------------------------------------------

// フィボナッチ数列の最初の10項の合計
fib_sum : [+] [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]

// 平方数のリスト
squares : [^ 2,] [1 ~ 10]

// 階乗の計算（1から5までの積）
factorial_5 : [*] [1 ~ 5]

// 1から10までの偶数の合計
even_sum : [+] [* 2,] [1 ~ 5]

// 範囲の二乗の合計（1² + 2² + ... + 5²）
sum_of_squares : [+] [^ 2,] [1 ~ 5]
